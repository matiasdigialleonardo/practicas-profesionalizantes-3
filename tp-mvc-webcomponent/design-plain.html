<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MVC WebComponent Design</title>
</head>

<body>


</body>

<style>
	.numberButton
	{
		background-color: blue;
		color: #FFFFFF;
		border-color: #FFFFFF;
		border-radius: 6px;
		width: 100%;
	}
	
	.operatorButton
	{
		background-color: #00FF04;
		color: #FFFFFF;
		border-color: #FFFFFF;
		border-radius: 6px;
		width: 100%;
	}
	
	.clearButton
	{
		background-color: #FF0000;
		color: #FFFFFF;
		border-color: #FFFFFF;
		width: 100%;
		border-radius: 6px;
	}
	
	.calculateButton
	{
		background-color: #FFB900;
		color: #FFFFFF;
		border-color: #FFFFFF;
		width: 100%;
		border-radius: 6px;
	}
	
	.displayResult
	{
		border-radius: 6px;
	}

</style>


<script>

class CalculatorView extends HTMLElement
{
	constructor(modelInstance)
	{
		super();

		this._innerController = new CalculatorController(this, modelInstance);
		
		this._table = document.createElement('table');

		this._tableBody = document.createElement('tbody');

        this._table.appendChild(this._tableBody);

		const displayTableRow = this._table.insertRow();
		const sevenTableRow = this._table.insertRow();
		const fourTableRow = this._table.insertRow();
		const oneTableRow = this._table.insertRow();
		const zeroTableRow = this._table.insertRow();
		const clearTableRow = this._table.insertRow();

		this.displayInput = document.createElement("input");

		this.button0 = document.createElement('button');
		this.button1 = document.createElement('button');
		this.button2 = document.createElement('button');
		this.button3 = document.createElement('button');
		this.button4 = document.createElement('button');
		this.button5 = document.createElement('button');
		this.button6 = document.createElement('button');
		this.button7 = document.createElement('button');
		this.button8 = document.createElement('button');
		this.button9 = document.createElement('button');

		this.buttonPlus = document.createElement('button');
		this.buttonMinus = document.createElement('button');
		this.buttonProduct = document.createElement('button');
		this.buttonDivision = document.createElement('button');

		this.buttonDecimal = document.createElement('button');
		this.buttonCalculate = document.createElement('button');
		this.buttonClear = document.createElement("button");

		this.button0.textContent = "0";
		this.button1.textContent = "1";
		this.button2.textContent = "2";
		this.button3.textContent = "3";
		this.button4.textContent = "4";
		this.button5.textContent = "5";
		this.button6.textContent = "6";
		this.button7.textContent = "7";
		this.button8.textContent = "8";
		this.button9.textContent = "9";

		this.buttonPlus.textContent = "+";
		this.buttonMinus.textContent = "-";
		this.buttonProduct.textContent = "*";
		this.buttonDivision.textContent = "/";

		this.buttonDecimal.textContent = ".";
		this.buttonCalculate.textContent = "=";
		this.buttonClear.textContent = "BORRAR";

		this.displayInput.classList.add("displayResult");

		this.button0.classList.add("numberButton");
		this.button1.classList.add("numberButton");
		this.button2.classList.add("numberButton");
		this.button3.classList.add("numberButton");
		this.button4.classList.add("numberButton");
		this.button5.classList.add("numberButton");
		this.button6.classList.add("numberButton");
		this.button7.classList.add("numberButton");
		this.button8.classList.add("numberButton");
		this.button9.classList.add("numberButton");

		this.buttonPlus.classList.add("operatorButton");
		this.buttonMinus.classList.add("operatorButton");
		this.buttonProduct.classList.add("operatorButton");
		this.buttonDivision.classList.add("operatorButton");

		this.buttonDecimal.classList.add("numberButton");
		this.buttonCalculate.classList.add("calculateButton");
		this.buttonClear.classList.add("clearButton");

		this.displayCell = displayTableRow.insertCell()
		this.displayCell.colSpan = 4;
		this.displayCell.appendChild(this.displayInput);

		sevenTableRow.insertCell().appendChild(button7);
		sevenTableRow.insertCell().appendChild(button8);
		sevenTableRow.insertCell().appendChild(button9);
		sevenTableRow.insertCell().appendChild(buttonPlus);

		fourTableRow.insertCell().appendChild(button4);
		fourTableRow.insertCell().appendChild(button5);
		fourTableRow.insertCell().appendChild(button6);
		fourTableRow.insertCell().appendChild(buttonMinus);

		oneTableRow.insertCell().appendChild(button1);
		oneTableRow.insertCell().appendChild(button2);
		oneTableRow.insertCell().appendChild(button3);
		oneTableRow.insertCell().appendChild(buttonProduct);

		zeroTableRow.insertCell().appendChild(this.button0);
		zeroTableRow.insertCell().appendChild(buttonDecimal);
		zeroTableRow.insertCell().appendChild(buttonCalculate);
		zeroTableRow.insertCell().appendChild(buttonDivision);

		const clearTableCell = clearTableRow.insertCell()
		clearTableCell.colSpan = 4;
		clearTableCell.appendChild(buttonClear);

		this.appendChild(this._table)

	}

	queryData()
	{
		let data =
		{
			username: this._username.value,
			password: this._password.value
		}

		return data;
	}
	
	updateDisplayWith( data )
	{
		this.displayInput.value = "0";
	}
	
	connectedCallback()
	{
		this.button0.onclick = this._innerController.onButton0Click.bind(this._innerController);
	}

	disconnectedCallback()
	{

	}

	adoptedCallback()
	{

	}

	attributeChangedCallback(oldValue, newValue)
	{

	}

	static observableAttributes()
	{
		return [];
	}
}

customElements.define('wc-view', CalculatorView);

class CalculatorController
{
	constructor(viewInstance, modelInstance)
	{		
		this.innerView = viewInstance;
		this.innerModel = modelInstance;
	}

	/* 
		onLoginButtonClick()
		{
			let viewData = this.innerView.queryData();

			let modelResponse = this.innerModel.login(viewData);

			this.innerView.updateWith( JSON.stringify(modelResponse) );
		}
	*/

	onButton0Click()
	{
		this.innerView.updateDisplayWith("0");
	}

	onButtonPress(data)
	{
		this.innerview.updateDisplayWith(data);
	}
}

class CalculatorModel
{
	constructor()
	{
		this._loginData = { username: 'jose', password: 'chango' };
	}

	login( data )
	{
		let response = { status: null, description: null };
		
		if ( data.username == this._loginData.username && data.password == this._loginData.password )
		{
			response.status = 'ok';
			response.description = '¡Hola José!';
		}
		else
		{
			response.status = 'error';
			response.description = 'Usuario y/o contraseña inválida.';
		}

		return response;
	}
}

function main()
{
	let model = new CalculatorModel();
	let view = new CalculatorView(model);

	document.body.appendChild(view);
}

window.onload = main;

</script>

</html>
